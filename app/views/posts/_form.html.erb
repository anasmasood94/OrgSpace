<%# app/views/posts/_form.html.erb %>
<div class="d-flex justify-content-center align-items-center pt-10">
  <div class="auth-card">
    <%= form_with(model: [@organization, @post], local: true, class: "needs-validation") do |form| %>
      <div class="form-group">
        <%= form.label :title, class: "form-label" %>
        <%= form.text_field :title, class: "form-control#{' is-invalid' if @post.errors[:title].any?}", required: true, autofocus: true %>
        <% if @post.errors[:title].any? %>
          <div class="invalid-feedback"><%= @post.errors[:title].first %></div>
        <% end %>
      </div>

      <div class="form-group">
        <%= form.label :content, class: "form-label" %>
        <%= form.text_area :content, class: "form-control#{' is-invalid' if @post.errors[:content].any?}", rows: 6, required: true %>
        <% if @post.errors[:content].any? %>
          <div class="invalid-feedback"><%= @post.errors[:content].first %></div>
        <% end %>
      </div>

      <div class="form-group">
        <%= form.label :age_group_id, "Age Group", class: "form-label" %>
        <%= form.select :age_group_id, options_for_select([['All', nil]] + AgeGroup.all.map { |ag| [ag.name, ag.id] }, @post.age_group_id), { prompt: "Select Age Group" }, { class: "form-select#{' is-invalid' if @post.errors[:age_group_id].any?}" } %>
        <% if @post.errors[:age_group_id].any? %>
          <div class="invalid-feedback"><%= @post.errors[:age_group_id].first %></div>
        <% end %>
      </div>

      <div class="d-flex justify-content-end">
        <%= form.submit(@post.persisted? ? "Update Post" : "Create Post", class: "btn btn-primary btn-block") %>
      </div>
    <% end %>
  </div>
</div> 